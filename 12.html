<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>University of Mumbai Result PDF â†’ JSON</title>

  <style>
    body {
      font-family: Arial;
      padding: 30px;
      background: #f4f6f8;
    }
    button {
      padding: 10px 16px;
      margin-top: 10px;
      cursor: pointer;
    }
    pre {
      background: #111;
      color: #0f0;
      padding: 15px;
      max-height: 400px;
      overflow: auto;
    }
  </style>
</head>

<body>

<h2>ğŸ“„ University of Mumbai Result PDF â†’ JSON</h2>

<input type="file" id="pdfFile" accept="application/pdf" />
<br><br>

<button id="generateBtn">Generate JSON</button>

<h3>JSON Output</h3>
<pre id="output">Waiting for PDF...</pre>

<script>
console.log("âœ… Script loaded");

document.getElementById("generateBtn").addEventListener("click", processPDF);

async function processPDF() {
  console.log("ğŸŸ¢ Button clicked");

  const fileInput = document.getElementById("pdfFile");
  const file = fileInput.files[0];

  if (!file) {
    console.warn("âš  No file selected");
    alert("Please choose a PDF file first");
    return;
  }

  console.log("ğŸ“„ File selected:", file.name);

  const formData = new FormData();
  formData.append("file", file);

  console.log("ğŸ“¡ Sending request to backend...");

  try {
    const response = await fetch(
      "https://channels-romy.onrender.com/parse",
      {
        method: "POST",
        body: formData
      }
    );

    console.log("ğŸ“¥ Response received:", response.status);

    const json = await response.json();
    console.log("âœ… JSON received:", json);

    document.getElementById("output").textContent =
      JSON.stringify(json, null, 2);

  } catch (error) {
    console.error("âŒ Fetch error:", error);
    alert("Error connecting to backend. Check console.");
  }
}
</script>

</body>
</html>
